<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wire Resistance vs Temperature - Interactive Simulation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            overflow: hidden;
        }
        
        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            padding: 20px;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 300;
            text-align: center;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #64b5f6, #42a5f5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            text-align: center;
            opacity: 0.8;
            font-size: 1.1rem;
        }
        
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .controls-panel {
            width: 350px;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(15px);
            border-right: 1px solid rgba(255,255,255,0.1);
            padding: 30px;
            overflow-y: auto;
        }
        
        .control-group {
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .control-group h3 {
            margin-bottom: 20px;
            font-size: 1.3rem;
            color: #64b5f6;
        }
        
        .slider-container {
            margin-bottom: 20px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 500;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255,255,255,0.2);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #64b5f6, #42a5f5);
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(100, 181, 246, 0.4);
            border: 2px solid white;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #64b5f6, #42a5f5);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 4px 12px rgba(100, 181, 246, 0.4);
        }
        
        .readings {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .reading-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .reading-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .reading-value {
            font-weight: 600;
            color: #64b5f6;
        }
        
        .visualization {
            flex: 1;
            position: relative;
            background: rgba(0,0,0,0.2);
        }
        
        #canvas-container {
            width: 100%;
            height: 100%;
        }
        
        .info-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            max-width: 300px;
        }
        
        .formula {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
        }
        
        .temperature-scale {
            background: linear-gradient(to right, 
                #2196f3 0%, 
                #4caf50 25%, 
                #ffeb3b 50%, 
                #ff9800 75%, 
                #f44336 100%);
            height: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .legend {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        
        .current-flow {
            animation: pulse 2s infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="loading-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 1000;">
    <div style="text-align: center; color: white;">
        <div class="loader" style="border: 5px solid #f3f3f3; border-top: 5px solid #3498db; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
        <p>Loading Simulation...</p>
    </div>
</div>

<div id="error-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #ff5252; padding: 20px; border-radius: 10px; text-align: center;">
        <h3 style="margin-bottom: 10px;">Error</h3>
        <p id="error-message">Something went wrong.</p>
        <button onclick="location.reload()" style="margin-top: 15px; padding: 8px 16px; border: none; border-radius: 5px; background: white; cursor: pointer;">Retry</button>
    </div>
</div>
    <div class="container">
        <div class="header">
            <h1>Wire Resistance Temperature Simulation</h1>
            <p>Interactive 3D visualization demonstrating how temperature affects electrical resistance in conductors</p>
        </div>
        
        <div class="main-content">
            <div class="controls-panel">
                <div class="control-group">
                    <h3>Environmental Controls</h3>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Temperature</span>
                            <span id="temp-value">20°C</span>
                        </div>
                        <input type="range" id="temperature-slider" class="slider" min="-50" max="200" value="20">
                        <div class="temperature-scale"></div>
                        <div class="legend">
                            <span>-50°C</span>
                            <span>Cold</span>
                            <span>Room</span>
                            <span>Hot</span>
                            <span>200°C</span>
                        </div>
                    </div>
                </div>
                
                <div class="control-group">
                    <h3>Electrical Controls</h3>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Applied Voltage</span>
                            <span id="voltage-value">5.0V</span>
                        </div>
                        <input type="range" id="voltage-slider" class="slider" min="0" max="12" step="0.1" value="5.0">
                    </div>
                </div>
                
                <div class="control-group">
                    <h3>Wire Properties</h3>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Wire Length</span>
                            <span id="length-value">1.0m</span>
                        </div>
                        <input type="range" id="length-slider" class="slider" min="0.5" max="3.0" step="0.1" value="1.0">
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Wire Diameter</span>
                            <span id="diameter-value">2.0mm</span>
                        </div>
                        <input type="range" id="diameter-slider" class="slider" min="1.0" max="5.0" step="0.1" value="2.0">
                    </div>
                </div>
                
                <div class="readings">
                    <h3 style="margin-bottom: 15px; color: #64b5f6;">Live Measurements</h3>
                    <div class="reading-item">
                        <span>Resistance:</span>
                        <span class="reading-value" id="resistance-reading">0.017 Ω</span>
                    </div>
                    <div class="reading-item">
                        <span>Current:</span>
                        <span class="reading-value" id="current-reading">294.1 A</span>
                    </div>
                    <div class="reading-item">
                        <span>Power:</span>
                        <span class="reading-value" id="power-reading">1470.6 W</span>
                    </div>
                    <div class="reading-item">
                        <span>Temp. Coefficient:</span>
                        <span class="reading-value" id="temp-coeff-reading">0.00393/°C</span>
                    </div>
                </div>
            </div>
            
            <div class="visualization">
                <div id="canvas-container"></div>
                <div class="info-overlay">
                    <h4 style="color: #64b5f6; margin-bottom: 10px;">Resistance Formula</h4>
                    <div class="formula">
                        R(T) = R₀[1 + α(T - T₀)]
                    </div>
                    <p style="font-size: 0.9rem; opacity: 0.9; line-height: 1.4;">
                        Where:<br>
                        R(T) = Resistance at temperature T<br>
                        R₀ = Resistance at reference temperature<br>
                        α = Temperature coefficient<br>
                        T₀ = Reference temperature (20°C)
                    </p>
                    
                    <h4 style="color: #64b5f6; margin: 15px 0 10px;">Current Status</h4>
                    <div id="status-indicator" class="current-flow" style="padding: 10px; background: rgba(76, 175, 80, 0.2); border-radius: 5px; text-align: center;">
                        Normal Operation
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
<script type="importmap">
{
    "imports": {
        "three": "https://unpkg.com/three@0.156.1/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.156.1/examples/jsm/"
    }
}
</script>
<script type="module">
    import WireResistanceSimulation from './simulation.js';
    
    let simulation;
    
    async function initSimulation() {
        const loadingOverlay = document.getElementById('loading-overlay');
        const errorOverlay = document.getElementById('error-overlay');
        const errorMessage = document.getElementById('error-message');

        try {
            loadingOverlay.style.display = 'flex';
            errorOverlay.style.display = 'none';
            
            simulation = new WireResistanceSimulation();
            await simulation.initialize();
            
            loadingOverlay.style.display = 'none';
        } catch (error) {
            console.error('Simulation initialization failed:', error);
            errorMessage.textContent = error.message || 'Failed to initialize simulation';
            errorOverlay.style.display = 'flex';
            loadingOverlay.style.display = 'none';
        }
    }

    // Initialize on DOM load
    document.addEventListener('DOMContentLoaded', initSimulation);
</script>

</body>
</html>